const uglify = require('rollup-plugin-uglify');
const babel = require('rollup-plugin-babel');

let config = {
	entry: './src/index.js',
	targets: [
		{ format: 'umd', dest: './bundle/jm-service.js' },
		{ format: 'es', dest: './bundle/jm-service.es.js' },
	],
	moduleName: 'jm.service',
	globals: {
		'@jmfe/jm-common': 'jm.common',
		'@jmfe/jm-cookie': 'jm.cookie'
	},
	plugins: [
		babel(),
	]
};

if (process.env.min) {
	config.targets.pop();
	config.targets[0].dest = './bundle/jm-service.min.js';
	config.plugins.push(uglify());
}

export default config;
