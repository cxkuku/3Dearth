const uglify = require('rollup-plugin-uglify');
const babel = require('rollup-plugin-babel');

let config = {
	entry: './src/index.js',
	targets: [
		{format: 'umd', dest: './bundle/jm-common.js'},
		{format: 'es', dest: './bundle/jm-common.es.js'},
	],
	moduleName: 'jm.common',
	globals: {},
	plugins: [
		babel()
	]
};

if (process.env.min) {
	config.targets.pop();
	config.targets[0].dest = './bundle/jm-common.min.js';
	config.plugins.push(uglify());
}

export default config;
