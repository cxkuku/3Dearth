/**
 * 获取 URL 参数
 *
 * @param  {string} [url]    		url 地址，默认取当前浏览器地址参数
 * @param  {string|array} name 		希望获取的参数名称
 * @return {string|object}
 */
export function getUrlQuery(url, name) {
	let getQueryParameters = function (str) {
		str = (str || window.location.search).replace(/(^\?)/, '');

		return str.split('&').map(function (kv) {
			kv = kv.split('=');
			this[kv[0]] = kv[1];
			return this;
		}.bind({}))[0];
	};

	if (arguments.length === 1 && url.indexOf('=') < 0) {
		name = url;
		url = null;
	}

	let obj = getQueryParameters(url);

	if (!name) return obj;

	if (Object.prototype.toString.call(name) === '[object Array]') {
		let result = {};
		for (let i = 0; i < name.length; i++) {
			result[name[i]] = obj[name[i]] || null;
		}
		return result;
	} else {
		return obj[name];
	}
}

/**
 * 序列化对象
 *
 * @param  {object} data 需要序列化的对象
 * @return {string}
 */
export function serialize(data) {
	return Object.keys(data).map(key => key + '=' + data[key]).join('&');
}
