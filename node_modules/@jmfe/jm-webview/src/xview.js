/**
 * iOS App 文档
 * http://cf.jd.com/pages/viewpage.action?pageId=85830303
 */

import { isWebview, isApp, getAppVersion, versionCompare, isObject, isArray, assign } from '@jmfe/jm-common';

/**
 * 关闭XView
 * 
 */
export function XViewClose() {
	if (!isWebview('xview')) return;
	if (isWebview('wk')) {
		window.webkit.messageHandlers.XView.postMessage({
			"method": "close",
		});
	} else {
		window.XView && window.XView.close();
	}
}


/**
 * 定制Xview默认关闭按钮
 * 
 * @param {number} [closePositionX=''] - 关闭按钮x坐标 0<=x<=1
 * @param {number} [closePositionY=''] - 关闭按钮y坐标 0<=x<=1
 * @param {string} [closeIcon=''] - 关闭按钮图片url，可选
 * @returns 
 */
export function XViewConfigCloseButton(closePositionX = '', closePositionY = '', closeIcon = '') {
	if (!isWebview('xview')) return;
	if (isWebview('wk')) {
		window.webkit.messageHandlers.XView.postMessage({
			"method": "configCloseButton",
			"params": {
				"closeIcon": closeIcon,
				"x": closePositionX,
				"y": closePositionY,
			},
			"callBackName": null,
			"callBackId": null
		});
	} else {
		window.XView && XView.configCloseButton(closeIcon, closePositionX, closePositionY);
	}
}
