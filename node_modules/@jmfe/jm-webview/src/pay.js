/**
 * iOS App 文档
 * http://cf.jd.com/pages/viewpage.action?pageId=85830303
 */

import { isWebview, isApp } from '@jmfe/jm-common';

/**
 * 京东支付
 * 
 * @param {string} [pin=''] 
 * @param {string} [code=''] 
 * @param {string} [mode=''] 
 * @returns 
 */
export function JDPaySdk_pay(pin = '', code = '', mode = '') {
	if (!isApp('jd')) return;
	if (isWebview('wk')) {
		window.webkit.messageHandlers.JDPaySdk.postMessage({
			'method': 'jdpaysdk_pay',
			'params': {
				'pin': pin,
				'code': code,
				'mode': mode
			},
			'callBackName': null,
			'callBackId': null,
		});
	} else {
		window.JDPaySdk && JDPaySdk.jdpaysdk_pay(pin, code, mode)
	}
}

/**
 * 关闭京东支付
 */
export function JDPaySdk_pop() {
	if (!isApp('jd')) return;
	if (isWebview('wk')) {
		window.webkit.messageHandlers.JDPaySdk.postMessage({
			'method': 'jdpaysdk_pop'
		})
	} else {
		window.JDPaySdk && JDPaySdk.jdpaysdk_pop();
	}
}
