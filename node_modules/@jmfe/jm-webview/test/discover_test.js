import * as discover from '../src/discover';
require('chai').should();

describe('Webview', () => {
	beforeEach(() => {
		global.window = { location: {} };
	});

	describe('toDiscovery()', () => {
		it('should build discovery channel url', () => {
			discover.toDiscovery();
			window.location.href.should.equal('openApp.jdMobile://virtual?params=%7B%22category%22%3A%22jump%22%2C%22des%22%3A%22Discovery%22%7D');
		});
	});

	describe('toArticle()', () => {
		it('should build artcile detail url', () => {
			discover.toArticle(111);
			window.location.href.should.equal('openApp.jdMobile://virtual?params=%7B%22category%22%3A%22jump%22%2C%22des%22%3A%22faxian_article%22%2C%22id%22%3A111%7D');
		});
	});

	describe('toAuthor()', () => {
		it('should build author page url', () => {
			discover.toAuthor(222);
			window.location.href.should.equal('openApp.jdMobile://virtual?params=%7B%22category%22%3A%22jump%22%2C%22des%22%3A%22faxian_author%22%2C%22authorId%22%3A222%7D');
		});
	});

	describe('toInventory()', () => {
		it('should build inventory url', () => {
			discover.toInventory();
			window.location.href.should.equal('openApp.jdMobile://virtual?params=%7B%22category%22%3A%22jump%22%2C%22des%22%3A%22inventory%22%7D');
		});
	});

	describe('toInventoryDetail()', () => {
		it('should build inventory detail url', () => {
			discover.toInventoryDetail(111);
			window.location.href.should.equal('openApp.jdMobile://virtual?params=%7B%22category%22%3A%22jump%22%2C%22des%22%3A%22inventoryDetail%22%2C%22id%22%3A111%7D');
		});
	});
});
