import * as livecast from '../src/livecast';
require('chai').should();

describe('LiveCast', () => {
	beforeEach(() => {
		global.window = { location: {} };
	});

	describe('toLiveCastList()', () => {
		it('should jump to find live cast list by default', () => {
			livecast.toLiveCastList();
			window.location.href.should.equal('openApp.jdMobile://virtual?params=%7B%22category%22%3A%22jump%22%2C%22des%22%3A%22FindLivePlayList%22%2C%22position%22%3A%220%22%7D');
		});

		it('should jump to find live cast list with type param', () => {
			livecast.toLiveCastList('seckill');
			window.location.href.should.equal('openApp.jdMobile://virtual?params=%7B%22category%22%3A%22jump%22%2C%22des%22%3A%22SecKillLivePlayList%22%2C%22position%22%3A%222%22%7D');
		});
	});

	describe('toLiveCastPreview()', () => {
		it('should jump to find live cast preview with id', () => {
			livecast.toLiveCastPreview('123');
			window.location.href.should.equal('openApp.jdMobile://virtual?params=%7B%22category%22%3A%22jump%22%2C%22des%22%3A%22FindLivePreDetail%22%2C%22id%22%3A%22123%22%2C%22position%22%3A%220%22%7D');
		});

		it('should jump to find live cast list with id and type', () => {
			livecast.toLiveCastPreview('123', 'seckill');
			window.location.href.should.equal('openApp.jdMobile://virtual?params=%7B%22category%22%3A%22jump%22%2C%22des%22%3A%22SecKillLivePreDetail%22%2C%22id%22%3A%22123%22%2C%22position%22%3A%222%22%7D');
		});
	});

	describe('toLiveCastRoom()', () => {
		it('should jump to find live cast room with id', () => {
			livecast.toLiveCastRoom('111');
			window.location.href.should.equal('openApp.jdMobile://virtual?params=%7B%22category%22%3A%22jump%22%2C%22des%22%3A%22LivePlayerRoom%22%2C%22id%22%3A%22111%22%2C%22position%22%3A%220%22%7D');
		});

		it('should jump to find live cast room with id and type param', () => {
			livecast.toLiveCastRoom('111', 'seckill');
			window.location.href.should.equal('openApp.jdMobile://virtual?params=%7B%22category%22%3A%22jump%22%2C%22des%22%3A%22LivePlayerRoom%22%2C%22id%22%3A%22111%22%2C%22position%22%3A%222%22%7D');
		});
	});
});
