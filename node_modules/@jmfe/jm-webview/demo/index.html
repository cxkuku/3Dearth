<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Webview测试</title>
	<meta charset="UTF-8">
    <meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" name="viewport">

    <style type="text/css">
    	body {
    		background: white;
    		padding-bottom: 50px;
    	}
    	section {
    		margin-bottom: 30px;
    	}
    	input {
    		border: 1px solid #ccc;
    		font-size: 18px;
    		padding: 5px 10px;
    		width: 130px;
    	}
    	.action-btn {
    		font-size: 18px;
    		border: 1px solid #888;
    		padding: 5px 10px;
    		margin: 10px 5px;
    		border-radius: 10px;
    		background: linear-gradient(to bottom, #ddd 0%, #bbb 100%);
    	}

    	h1 {
    		text-align: center;
    		border-bottom: 1px solid #ccc;
    		padding: 15px 0;
    		margin-bottom: 15px;
    	}

    	dt, dd {
    		display: inline-block;
    		width: 45%;
    		margin: 0 0 10px;
    		padding: 0;
    	}

    	dt {
    		text-align: right;
    	}
    </style>
</head>
<body>
	<section>
		<h2>环境信息</h2>
		<dl>
			<dt>京东 app 版本：</dt>
			<dd id="appver">unknown</dd>
			<dt>操作系统：</dt>
			<dd id="os">unknown</dd>
			<dt>网络状态：</dt>
			<dd id="network">unknown</dd>
		</dl>
	</section>

	<section>
		<h2>基础</h2>
		<button class="action-btn" data-call="toHome">回到首页</button>
		<button class="action-btn" data-call="toLogin">登陆</button>
		<button class="action-btn" data-call="toCouponCenter">领券中心</button>
		<button class="action-btn" data-call="toOrderList">订单列表</button>

		<div>
			<input id="prod-id" type="text" placeholder="产品id" value="3230926" />	
			<button class="action-btn" data-call="toProduct" data-ref="prod-id">产品详情</button>
		</div>
		
		<div>
			<input id="shop-id" type="text" placeholder="店铺id" value="1000000525" />
			<button class="action-btn" data-call="toShop" data-ref="shop-id">店铺</button>
		</div>
		
		<div>
			<input id="url-id" type="text" placeholder="Url 地址" value="http://m.jd.com" />
			<button class="action-btn" data-call="openNewWebView" data-ref="url-id">新窗口打开</button>
		</div>
		
	</section>

	<section>
		<h2>发现</h2>

		<button class="action-btn" data-call="toDiscovery">发现频道</button>
		<button class="action-btn" data-call="toFlashSale">秒杀频道</button>
		<button class="action-btn" data-call="toInventory">优选清单</button>
		
		<div>
			<input id="article-id" type="text" placeholder="文章id" value="28126" />	
			<button class="action-btn" data-call="toArticle" data-ref="article-id">文章</button>	
		</div>

		<div>
			<input id="author-id" type="text" placeholder="作者id" value="10870" />	
			<button class="action-btn" data-call="toAuthor" data-ref="author-id">作者</button>	
		</div>

		<div>
			<input id="inventory-id" type="text" placeholder="优选商品id" value="230" />	
			<button class="action-btn" data-call="toInventoryDetail" data-ref="inventory-id">优选清单商品 </button>	
		</div>
	</section>

	<section>
		<h2>购物车</h2>

		<button class="action-btn" data-call="toCart">购物车</button>
		<button class="action-btn" data-call="refreshCart">刷新购物车</button>
		<button class="action-btn" data-call="showCartButton">显示购物车按钮</button>
	</section>

	<section>
		<h2>直播</h2>

		<div>
			<select id="live-list-type">
				<option value="find">发现</option>
				<option value="seckill">秒杀</option>
			</select>
			<button class="action-btn livecast" data-call="toLiveCastList" data-type="live-list-type">直播列表</button>	
		</div>

		<div>
			<select id="live-preview-type">
				<option value="find">发现</option>
				<option value="seckill">秒杀</option>
			</select>
			<input id="live-preview-id" type="text" placeholder="直播ID" value="10870" />	
			<button class="action-btn livecast" data-call="toLiveCastPreview" data-ref="live-preview-id" data-type="live-preview-type">直播预告</button>	
		</div>

		<div>
			<select id="live-room-type">
				<option value="find">发现</option>
				<option value="seckill">秒杀</option>
			</select>
			<input id="live-room-id" type="text" placeholder="直播ID" value="230" />	
			<button class="action-btn livecast" data-call="toLiveCastRoom" data-ref="live-room-id" data-type="live-room-type">直播间</button>	
		</div>
	</section>

	<section>
		<h2>分享</h2>

		<button class="share action-btn" data-call="callSharePane">分享面板</button>
		<button class="share action-btn" data-call="setShareInfo">设置分享信息</button>
		<button class="share action-btn" data-call="sendDirectShare">直接分享</button>
	</section>

	<section>
		<h2></h2>
	</section>

	<script type="text/javascript" src="//cdn.bootcss.com/zepto/1.2.0/zepto.js"></script>
	<script type="text/javascript" src="//wechatfe.github.io/vconsole/lib/vconsole.min.js?v=2.5.0"></script>
	<script type="text/javascript" src="/node_modules/@jmfe/jm-common/bundle/jm-common.js"></script>
	<script type="text/javascript" src="/bundle/jm-webview.js"></script>

	<script type="text/javascript">
		$(function() {
			var os = null;
			
			if (jm.common.isAndroid()) os = 'Android';
			else if (jm.common.isIOS()) os = 'IOS';

			$('#appver').html(jm.common.getAppVersion('jd'));
			$('#network').html(jm.common.getNetwork());
			if (os) $('#os').html(os);

			$(document).on('click', '.action-btn', function (e) {
				e.preventDefault();

				var btn = $(this);
				var method = btn.data('call');
				var ref = btn.data('ref');
				var params = [];
				
				if (ref) {
					params = [ $('#' + ref).val() ];
				}

				if(btn.hasClass('share')) {
					params = [{
						title: document.title,
						content: 'a webview test page',
						url: location.href,
						img: '//st.360buyimg.com/m/images/index/top-jdlogo.png'
					}];
				}

				if (btn.hasClass('livecast')) {
					var type = $('#' + btn.data('type')).val();
					params.push(type);
				}
				console.log(method, params);
				jm.webview[method].apply(null, params);
			});
		});
	</script>
</body>
</html>
